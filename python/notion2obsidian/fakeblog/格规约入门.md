# 格规约入门

> 最近因为工作需要复习了一下格密码以及格规约相关知识，相比大二刚刚接触密码学有了更深入的理解，由于本人不是密码学/数学专业的也并非出身于正儿八经的好大学，仅仅从一个凑打CTF的角度来聊聊格规约与密码学，各位自动化、应物、应数、光电的大爹轻点喷
> 

对于像我这种智商较低，数理基础较为薄弱的普通人推荐先阅读

[](https://github.com/7feilee/crypto_books/blob/master/xidian/格公钥密码的现状.ppt)

这篇ppt大致上介绍格其实就是一种特殊的矩阵，向量发布在整数点上的特性来确定了离散性

ppt里面的公式咱一时半会也看不明白，就记住了下面这句话

> 对于一个具有一定不变量值的格，怎样评价它的密码性能优劣？换句话说，格上的困难问题在该格上表现得足够困难，还是表现得不够困难，甚至是容易求解的？“好”的格，格的尺寸最小的若干个向量相互之间的角度不太偏向锐角或钝角（当然也绝不能是直角）。“好”的格，格的尺寸最小的若干个向量的尺寸差别不大（具有小的Gap）
> 

对格的理解细分到基向量可以类比得理解为Nacl晶体中的Na离子和Cl离子，虽然物质的本质是原子和分子，但在NaCl晶体中，只被分为Na和Cl讨论，虽然有理数之间的距离可能是无理数，但在格内，我们只用整数讨论

![Untitled](%E6%A0%BC%E8%A7%84%E7%BA%A6%E5%85%A5%E9%97%A8/Untitled.png)

## NTRU-mini

十分经典的ntru教具模型，大二那年在ruan师傅的博客看到，两年后有了更加深入的认识

![Untitled](%E6%A0%BC%E8%A7%84%E7%BA%A6%E5%85%A5%E9%97%A8/Untitled%201.png)

现在，我们来考虑敌手如何攻击这个密码体系。仅仅已知公钥(g,p),她并不能找到真正的(f,g）;但她可以找到一组
(F,G),如果(F,G)在解密时表现与(f,g)相同，那么Eve就可以完成解密工作。具体而言：

![Untitled](%E6%A0%BC%E8%A7%84%E7%BA%A6%E5%85%A5%E9%97%A8/Untitled%202.png)

上面的问题可以概括为：有两个已知的向量，需要找出一套线性组合系数（必须是整数），来生成一个**足够短的向量（F,G）。**

### 构造格子

$$
v1=[1,h],v2=[0,q]\\L=\begin{bmatrix}  v1 \\  v2\end{bmatrix}=\begin{bmatrix}  1&h \\  0&q\end{bmatrix}
$$

大多文章直接刨去了上一步将式子抽象到向量，再由向量抽象到矩阵的步骤。

让人难读着纯纯一头雾水。。

### 得到短向量(相对)

$$
\begin{bmatrix}  1&h \\  0&q\end{bmatrix}\overset{LLL}\longrightarrow \begin{bmatrix}  F,G \end{bmatrix}= \begin{bmatrix}  f&g \\  f'&g'\end{bmatrix}
$$

当然，通过[F,G]可以得到F，R

这种方法的思想有点类似与辗转相除法，

gcd:s1*e1+s2*e2 = gcd(e1,e2)

LLL:F*v1+R*v2 = (F,G)

LLL算法实际上就是在高维向量组成的完整空间里面找F和R